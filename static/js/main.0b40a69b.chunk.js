(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{24:function(e,t,a){e.exports=a.p+"static/media/logo.1d985892.png"},29:function(e,t,a){e.exports=a(42)},38:function(e,t,a){},41:function(e,t,a){},42:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(23),l=a.n(c),o=a(7),i=a(8),s=a(10),u=a(9),m=a(11),d=a(13),f=a(12),h=a(24),p=a.n(h),v=function(){return r.a.createElement("header",{className:"main-header"},r.a.createElement("img",{src:p.a,alt:"FFXIV Fan Page"}),r.a.createElement("ul",{className:"main-nav"},r.a.createElement("li",null,r.a.createElement(d.b,{exact:!0,to:"/"},"Marketboard")),r.a.createElement("li",null,r.a.createElement(d.b,{to:"/gathering"},"Gathering")),r.a.createElement("li",null,r.a.createElement(d.b,{to:"/crafting"},"Crafting")),r.a.createElement("li",null,r.a.createElement(d.b,{to:"/about"},"About"))))},E=function(e){return r.a.createElement("div",{className:"main-content"},r.a.createElement("h2",null,e.title),r.a.createElement("p",null,"Coming Soon"))},b=function(){return r.a.createElement("p",null,"coming soon")},g=function(){return r.a.createElement("div",{className:"main-content"},r.a.createElement("h2",null,"About"),r.a.createElement("p",null,"Jsut a dude working on this in spare time"))},P=function(){return r.a.createElement("div",{className:"main-content not-found"},r.a.createElement("i",{className:"material-icons icn-error"},"error_outline"),r.a.createElement("h2",null,"Page Not Found"))},N=(n.PureComponent,a(15)),I=a(19),y=r.a.createContext(),k=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(s.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={data:[],items:[],loadPercent:0,loadIncrementAmount:0,pageNumber:1,pageTotal:0,loadedPages:[1]},a.tick=function(){a.state.pageNumber!==a.state.pageTotal?(a.FetchNextPage(a.state.pageNumber),a.setState(function(e){return{pageNumber:e.pageNumber+1}})):clearInterval(a.intervalID)},a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){console.log("Fetching Data"),this.FetchInitial()}},{key:"FetchInitial",value:function(){var e,t,a=this,n="https://xivapi.com/search?indexes=item&filters=ItemSearchCategory.ID>=9&page=".concat(this.state.pageNumber,"&columns=ID");fetch(n,{mode:"cors"}).then(function(e){return e.json()}).then(function(n){console.log("response",n),console.log(n.Pagination.Page),e=n.Results.map(function(e){return e.ID}).toString(),t="https://xivapi.com/market/items?servers=Goblin&ids=".concat(e);var r=1/(2*n.Pagination.PageTotal)*100+1e-10;a.setState({pageTotal:n.Pagination.PageTotal,loadIncrementAmount:r,loadPercent:r}),fetch(t,{mode:"cors"}).then(function(e){return e.json()}).then(function(e){var t,n=new Date;n.setDate(n.getDate()-7),t=(t=e.map(function(e){return e.Goblin})).map(function(e){return Object(I.a)({},e,{MinPrice:e.Prices.reduce(function(e,t){return e.PricePerUnit<t.PricePerUnit?e:t},0).PricePerUnit,MinPriceQuantity:e.Prices.reduce(function(e,t){return e.PricePerUnit<t.PricePerUnit?e:t},0).Quantity,LastWeekGil:e.History.filter(function(e){return e.PurchaseDateMS>=n}).map(function(e){return e.PriceTotal}).reduce(function(e,t){return e+t},0),LastWeekTransactions:e.History.filter(function(e){return e.PurchaseDateMS>=n}).length,LastWeekQuantity:e.History.filter(function(e){return e.PurchaseDateMS>=n}).map(function(e){return e.Quantity}).reduce(function(e,t){return e+t},0)})}),a.setState(function(a){return{items:t,data:e,loadPercent:a.loadPercent+a.loadIncrementAmount}})}).then(function(e){a.intervalID=setInterval(function(){return a.tick()},200)})})}},{key:"FetchNextPage",value:function(){var e,t=this;this.state.pageNumber!==this.state.pageTotal&&fetch("https://xivapi.com/search?indexes=item&filters=ItemSearchCategory.ID>=9&page=".concat(this.state.pageNumber+1,"&columns=ID"),{mode:"cors"}).then(function(e){return e.json()}).then(function(a){console.log("response page:",a.Pagination.Page),e=a.Results.map(function(e){return e.ID}).toString(),t.setState(function(e){return{loadedPages:[].concat(Object(N.a)(e.loadedPages),[a.Pagination.Page]),pageNumber:a.Pagination.Page,loadPercent:e.loadPercent+e.loadIncrementAmount}}),fetch("https://xivapi.com/market/items?servers=Goblin&ids=".concat(e),{mode:"cors"}).then(function(e){return e.json()}).then(function(e){var a,n=new Date;n.setDate(n.getDate()-7),a=(a=e.map(function(e){return e.Goblin})).map(function(e){return Object(I.a)({},e,{MinPrice:e.Prices.reduce(function(e,t){return e.PricePerUnit<t.PricePerUnit?e:t},0).PricePerUnit,MinPriceQuantity:e.Prices.reduce(function(e,t){return e.PricePerUnit<t.PricePerUnit?e:t},0).Quantity,LastWeekGil:e.History.filter(function(e){return e.PurchaseDateMS>=n}).map(function(e){return e.PriceTotal}).reduce(function(e,t){return e+t},0),LastWeekTransactions:e.History.filter(function(e){return e.PurchaseDateMS>=n}).length,LastWeekQuantity:e.History.filter(function(e){return e.PurchaseDateMS>=n}).map(function(e){return e.Quantity}).reduce(function(e,t){return e+t},0)})}),t.setState(function(t){return{items:[].concat(Object(N.a)(t.items),Object(N.a)(a)),data:[].concat(Object(N.a)(t.data),Object(N.a)(e)),loadPercent:t.loadPercent+t.loadIncrementAmount}})})})}},{key:"render",value:function(){return r.a.createElement(y.Provider,{value:{data:this.state.data,items:this.state.items,loadPercent:this.state.loadPercent,actions:{}}},this.props.children)}}]),t}(n.Component),j=y.Consumer,D=a(28),O=(a(38),function(){return r.a.createElement(j,null,function(e){var t=new Date;t.setDate(t.getDate()-7);var a=[{Header:"Item ID",accessor:"ItemID",headerClassName:"hidden",className:"hidden"},{Header:"Item Name",accessor:"Item.Name",sortable:!0,filterable:!0,filterMethod:function(e,t){return""===e.value||!!t[e.id].toUpperCase().includes(e.value.toUpperCase())||void 0}},{Header:"Lowest Price",accessor:"MinPrice",className:"number-table",sortable:!0,Cell:function(e){return(new Intl.NumberFormat).format(e.value)}},{Header:"Quantity",accessor:"MinPriceQuantity",className:"number-table",sortable:!0,Cell:function(e){return(new Intl.NumberFormat).format(e.value)}},{Header:"Gil Made Last Week",accessor:"LastWeekGil",className:"number-table",sortable:!0,Cell:function(e){return(new Intl.NumberFormat).format(e.value)},filterable:!0,filterMethod:function(e,t){return console.log(t[e.id],">=",parseInt(e.value),"=",t[e.id]>=parseInt(e.value)),""===e.value||t[e.id]>=parseInt(e.value)||void 0}},{Header:"Units Sold Last Week",accessor:"LastWeekQuantity",className:"number-table",sortable:!0,Cell:function(e){return(new Intl.NumberFormat).format(e.value)},filterable:!0,filterMethod:function(e,t){return""===e.value||t[e.id]<=e.value||void 0}},{Header:"Transactions Last Week",accessor:"LastWeekTransactions",className:"number-table",sortable:!0,Cell:function(e){return(new Intl.NumberFormat).format(e.value)},filterable:!0,filterMethod:function(e,t){return""===e.value||t[e.id]>=parseInt(e.value)||void 0}}];return r.a.createElement(D.a,{className:"dark -striped -highlight",data:e.items,columns:a})})}),w=a(27),C=a.n(w),M=function(e){function t(){return Object(o.a)(this,t),Object(s.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return r.a.createElement(j,null,function(e){return r.a.createElement("div",{className:"loading-div"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-2"}),r.a.createElement("div",{className:"col center"},r.a.createElement("h1",null,"Data is being fetched from the server")),r.a.createElement("div",{className:"col-2"})),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col"}),r.a.createElement("div",{className:"col-3 center"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col"}),r.a.createElement("div",{className:"col"},r.a.createElement(C.a,{size:150,spinnerColor:"#333",spinnerWidth:15,visible:!0})),r.a.createElement("div",{className:"col"}))),r.a.createElement("div",{className:"col"})),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col"}),r.a.createElement("div",{className:"col center"},r.a.createElement("h2",null,e.loadPercent.toFixed(1),"%")),r.a.createElement("div",{className:"col"})))})}}]),t}(n.Component),x=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(s.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).handleSubmit=function(e){e.preventDefault();a.name.value,a.topic.value},a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){console.log("Marketboard props:",this.props)}},{key:"render",value:function(){var e;return e=this.props.loadPercent<100?r.a.createElement(M,null):r.a.createElement(O,null),r.a.createElement(j,null,function(t){return r.a.createElement("div",{className:"main-content home"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col"}),r.a.createElement("div",{className:"col"},r.a.createElement("h2",null,"Currently only working on Goblin")),r.a.createElement("div",{className:"col"})),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col"},r.a.createElement("p",null,r.a.createElement("strong",null,"Item name")," search box is case insensitive")),r.a.createElement("div",{className:"col"},r.a.createElement("p",null,r.a.createElement("strong",null,"Gil made Last Week")," search box is for gil ",r.a.createElement("strong",null,"greater than or equal to")," the provided value")),r.a.createElement("div",{className:"col"},r.a.createElement("p",null,r.a.createElement("strong",null,"Units Sold Last Week")," search box is for units ",r.a.createElement("strong",null,"less than or equal to")," the provided value")),r.a.createElement("div",{className:"col"},r.a.createElement("p",null,r.a.createElement("strong",null,"Transactions Last Week")," search box is for transactions ",r.a.createElement("strong",null,"greater than or equal to")," the provided value"))),r.a.createElement("hr",null),e)})}}]),t}(n.Component),S=function(e){function t(){return Object(o.a)(this,t),Object(s.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return r.a.createElement(j,null,function(e){return r.a.createElement(d.a,null,r.a.createElement("div",{className:"container"},r.a.createElement(v,null),r.a.createElement(f.c,null,r.a.createElement(f.a,{exact:!0,path:"/",render:function(){return r.a.createElement(x,{loadPercent:e.loadPercent})}}),r.a.createElement(f.a,{path:"/gathering",render:function(){return r.a.createElement(E,{title:"Gathering"})}}),r.a.createElement(f.a,{exact:!0,path:"/crafting",component:b}),r.a.createElement(f.a,{exact:!0,path:"/about",component:g}),r.a.createElement(f.a,{component:P}))))})}}]),t}(n.Component);a(40),a(41);l.a.render(r.a.createElement(k,null,r.a.createElement(S,null)),document.getElementById("root"))}},[[29,1,2]]]);
//# sourceMappingURL=main.0b40a69b.chunk.js.map